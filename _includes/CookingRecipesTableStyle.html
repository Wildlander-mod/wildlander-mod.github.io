<style>
.cooking-recipes-controls {
  margin-bottom: 20px;
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  align-items: center;
  background: #462b53;
  padding: 15px;
  border-radius: 4px;
  border: 1px solid #50098a;
}

.cooking-recipes-controls label {
  font-weight: 600;
  color: #f77ef1;
  margin-right: 5px;
}

.cooking-recipes-controls input,
.cooking-recipes-controls select {
  padding: 8px 12px;
  border: 1px solid #50098a;
  border-radius: 4px;
  font-size: 14px;
  background: #222222;
  color: #e6e6e6;
  font-family: inherit;
}

.cooking-recipes-controls input[type="text"] {
  min-width: 300px;
  flex: 1;
}

.cooking-recipes-controls input[type="text"]::placeholder {
  color: #888;
}

.cooking-recipes-controls select {
  min-width: 150px;
  background: white;
  cursor: pointer;
}

.cooking-recipes-controls select:hover {
  border-color: #f77ef1;
}

.cooking-recipes-controls button {
  padding: 8px 16px;
  background-color: #50098a;
  color: #ffffff;
  border: 1px solid #50098a;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  transition: background-color 0.2s;
}

.cooking-recipes-controls button:hover {
  background-color: #f77ef1;
  color: #222222;
  border-color: #f77ef1;
}

.cooking-recipes-controls button:active {
  background-color: #e94ee1;
}

.cooking-recipes-table {
  width: 100%;
  overflow-x: auto;
  margin-top: 20px;
}

.cooking-recipes-table table {
  width: 100%;
  border-collapse: collapse;
  border: 2px solid #50098a;
}

.cooking-recipes-table th,
.cooking-recipes-table td {
  border: 1px solid #50098a;
  padding: 12px;
  text-align: left;
  vertical-align: top;
}

.cooking-recipes-table th {
  background-color: #50098a;
  color: #ffffff;
  font-weight: 600;
  font-size: 13px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Item Name column */
.cooking-recipes-table th:nth-child(1),
.cooking-recipes-table td:nth-child(1) {
  width: 120px;
  word-break: break-word;
  font-weight: 500;
}

/* Type column */
.cooking-recipes-table th:nth-child(2),
.cooking-recipes-table td:nth-child(2) {
  width: 80px;
  word-break: break-word;
}

/* Effects column */
.cooking-recipes-table th:nth-child(3),
.cooking-recipes-table td:nth-child(3) {
  width: 180px;
  word-break: break-word;
}

/* Items Required column */
.cooking-recipes-table th:nth-child(4),
.cooking-recipes-table td:nth-child(4) {
  width: 120px;
  word-break: break-word;
}

/* Qty Made column */
.cooking-recipes-table th:nth-child(5),
.cooking-recipes-table td:nth-child(5) {
  width: 80px;
  word-break: break-word;
}

/* Perks Needed column */
.cooking-recipes-table th:nth-child(6),
.cooking-recipes-table td:nth-child(6) {
  width: 100px;
  word-break: break-word;
}

/* Toolkits Required column */
.cooking-recipes-table th:nth-child(7),
.cooking-recipes-table td:nth-child(7) {
  width: 100px;
  word-break: break-word;
}

/* Proximity column */
.cooking-recipes-table th:nth-child(8),
.cooking-recipes-table td:nth-child(8) {
  width: 120px;
  word-break: break-word;
}

/* Additional Requirements column */
.cooking-recipes-table th:nth-child(9),
.cooking-recipes-table td:nth-child(9) {
  width: 150px;
  word-break: break-word;
}

.cooking-recipes-table tbody tr:nth-child(odd) {
  background-color: #222222;
}

.cooking-recipes-table tbody tr:nth-child(even) {
  background-color: #2a2a2a;
}

.cooking-recipes-table tbody tr:hover {
  background-color: #3d2454;
}

.cooking-recipes-table tr.hidden {
  display: none;
}

.cooking-recipes-table tr.header {
  display: table-row !important;
}

.filter-result-count-recipes {
  font-size: 13px;
  color: #f77ef1;
  margin-top: 10px;
  font-weight: 500;
}

/* Tooltip Styles */
.recipe-tooltip {
  position: absolute;
  background-color: #222222;
  border: 2px solid #50098a;
  border-radius: 6px;
  padding: 20px;
  max-width: 600px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
  z-index: 1000;
  font-size: 13px;
  display: none;
  pointer-events: none;
}

.recipe-tooltip.active {
  display: block;
}

.recipe-tooltip-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
  padding-bottom: 12px;
  border-bottom: 1px solid #50098a;
  gap: 15px;
}

.recipe-tooltip-name {
  font-size: 18px;
  font-weight: 700;
  color: #f77ef1;
  letter-spacing: 0.5px;
}

.recipe-tooltip-row {
  margin-bottom: 12px;
  line-height: 1.4;
}

.recipe-tooltip-label {
  color: #f77ef1;
  font-weight: 600;
  display: block;
  margin-bottom: 4px;
  text-transform: uppercase;
  font-size: 11px;
  letter-spacing: 0.3px;
}

.recipe-tooltip-value {
  color: #e6e6e6;
  padding-left: 8px;
  border-left: 2px solid #462b53;
}

.cooking-recipes-table td:nth-child(1) {
  cursor: pointer;
  transition: color 0.2s;
}

.cooking-recipes-table td:nth-child(1):hover {
  color: #f77ef1;
}
</style>

<div class="cooking-recipes-controls">
  <input type="text" id="cookingRecipesSearch" placeholder="Search (Item Name, Effects, Requirements)..." />
  <select id="typeFilter">
    <option value="">All Types</option>
  </select>
  <select id="toolkitFilter">
    <option value="">All Toolkits</option>
  </select>
  <select id="perksFilter">
    <option value="">All Perks</option>
  </select>
  <button id="clearFiltersRecipes" onclick="clearCookingRecipesFilters()">Clear Filters</button>
</div>
<div class="filter-result-count-recipes" id="filterResultCountRecipes"></div>

<script>
function initCookingRecipesFilters() {
  const table = document.querySelector('.cooking-recipes-table table');
  if (!table) return;
  
  const rows = Array.from(table.querySelectorAll('tbody tr'));
  const types = new Set();
  const toolkits = new Set();
  const perks = new Set();
  
  rows.forEach(row => {
    const cells = row.querySelectorAll('td');
    if (cells.length >= 7) {
      const type = cells[1].textContent.trim();
      const toolkit = cells[6].textContent.trim();
      const perk = cells[5].textContent.trim();
      if (type) types.add(type);
      if (toolkit) toolkits.add(toolkit);
      if (perk) perks.add(perk);
    }
  });
  
  const typeSelect = document.getElementById('typeFilter');
  const toolkitSelect = document.getElementById('toolkitFilter');
  const perksSelect = document.getElementById('perksFilter');
  
  Array.from(types).sort().forEach(t => {
    const option = document.createElement('option');
    option.value = t;
    option.textContent = t;
    typeSelect.appendChild(option);
  });
  
  Array.from(toolkits).sort().forEach(tk => {
    const option = document.createElement('option');
    option.value = tk;
    option.textContent = tk;
    toolkitSelect.appendChild(option);
  });
  
  Array.from(perks).sort().forEach(perk => {
    const option = document.createElement('option');
    option.value = perk;
    option.textContent = perk;
    perksSelect.appendChild(option);
  });
  
  document.getElementById('cookingRecipesSearch').addEventListener('input', filterCookingRecipesTable);
  typeSelect.addEventListener('change', filterCookingRecipesTable);
  toolkitSelect.addEventListener('change', filterCookingRecipesTable);
  perksSelect.addEventListener('change', filterCookingRecipesTable);
  
  initCookingRecipesTooltips();
  
  updateFilterCountRecipes();
}

function initCookingRecipesTooltips() {
  const table = document.querySelector('.cooking-recipes-table table');
  if (!table) return;
  
  let tooltip = document.getElementById('cookingRecipesTooltip');
  if (!tooltip) {
    tooltip = document.createElement('div');
    tooltip.id = 'cookingRecipesTooltip';
    tooltip.className = 'recipe-tooltip';
    document.body.appendChild(tooltip);
  }
  
  const rows = table.querySelectorAll('tbody tr');
  
  rows.forEach(row => {
    const cells = row.querySelectorAll('td');
    if (cells.length < 9) return;
    
    const itemNameCell = cells[0];
    const itemName = cells[0].textContent.trim();
    const itemType = cells[1].textContent.trim();
    const effects = cells[2].textContent.trim();
    const itemsRequired = cells[3].textContent.trim();
    const qtyMade = cells[4].textContent.trim();
    const perksNeeded = cells[5].textContent.trim();
    const toolkitsRequired = cells[6].textContent.trim();
    const proximity = cells[7].textContent.trim();
    const additionalRequirements = cells[8].textContent.trim();
    
    itemNameCell.addEventListener('mouseenter', (e) => {
      showCookingRecipesTooltip(e, {itemName, itemType, effects, itemsRequired, qtyMade, perksNeeded, toolkitsRequired, proximity, additionalRequirements});
    });
    
    itemNameCell.addEventListener('mouseleave', hideCookingRecipesTooltip);
  });
}

function showCookingRecipesTooltip(event, data) {
  const tooltip = document.getElementById('cookingRecipesTooltip');
  if (!tooltip) return;
  
  tooltip.innerHTML = `
    <div class="recipe-tooltip-header">
      <div class="recipe-tooltip-name">${data.itemName}</div>
    </div>
    ${data.itemType ? `<div class="recipe-tooltip-row">
      <span class="recipe-tooltip-label">Type</span>
      <div class="recipe-tooltip-value">${data.itemType}</div>
    </div>` : ''}
    ${data.effects ? `<div class="recipe-tooltip-row">
      <span class="recipe-tooltip-label">Effects</span>
      <div class="recipe-tooltip-value">${data.effects}</div>
    </div>` : ''}
    ${data.itemsRequired ? `<div class="recipe-tooltip-row">
      <span class="recipe-tooltip-label">Items Required</span>
      <div class="recipe-tooltip-value">${data.itemsRequired}</div>
    </div>` : ''}
    ${data.qtyMade ? `<div class="recipe-tooltip-row">
      <span class="recipe-tooltip-label">Qty Made</span>
      <div class="recipe-tooltip-value">${data.qtyMade}</div>
    </div>` : ''}
    ${data.perksNeeded ? `<div class="recipe-tooltip-row">
      <span class="recipe-tooltip-label">Perks Needed</span>
      <div class="recipe-tooltip-value">${data.perksNeeded}</div>
    </div>` : ''}
    ${data.toolkitsRequired ? `<div class="recipe-tooltip-row">
      <span class="recipe-tooltip-label">Toolkits Required</span>
      <div class="recipe-tooltip-value">${data.toolkitsRequired}</div>
    </div>` : ''}
    ${data.proximity ? `<div class="recipe-tooltip-row">
      <span class="recipe-tooltip-label">Proximity/Location</span>
      <div class="recipe-tooltip-value">${data.proximity}</div>
    </div>` : ''}
    ${data.additionalRequirements ? `<div class="recipe-tooltip-row">
      <span class="recipe-tooltip-label">Additional Requirements</span>
      <div class="recipe-tooltip-value">${data.additionalRequirements}</div>
    </div>` : ''}
  `;
  
  tooltip.classList.add('active');
  
  const rect = event.target.getBoundingClientRect();
  tooltip.style.left = (rect.left + window.scrollX) + 'px';
  tooltip.style.top = (rect.bottom + window.scrollY + 8) + 'px';
}

function hideCookingRecipesTooltip() {
  const tooltip = document.getElementById('cookingRecipesTooltip');
  if (tooltip) {
    tooltip.classList.remove('active');
  }
}

function filterCookingRecipesTable() {
  const table = document.querySelector('.cooking-recipes-table table');
  if (!table) return;
  
  const searchTerm = document.getElementById('cookingRecipesSearch').value.toLowerCase();
  const typeFilter = document.getElementById('typeFilter').value;
  const toolkitFilter = document.getElementById('toolkitFilter').value;
  const perksFilter = document.getElementById('perksFilter').value;
  
  const rows = table.querySelectorAll('tbody tr');
  let visibleCount = 0;
  
  rows.forEach(row => {
    const cells = row.querySelectorAll('td');
    if (cells.length < 9) return;
    
    const itemName = cells[0].textContent.toLowerCase();
    const type = cells[1].textContent.trim();
    const effects = cells[2].textContent.toLowerCase();
    const itemsRequired = cells[3].textContent.toLowerCase();
    const toolkit = cells[6].textContent.trim();
    const perks = cells[5].textContent.trim();
    
    const matchesSearch = !searchTerm || 
                         itemName.includes(searchTerm) ||
                         effects.includes(searchTerm) ||
                         itemsRequired.includes(searchTerm);
    
    const matchesType = !typeFilter || type === typeFilter;
    const matchesToolkit = !toolkitFilter || toolkit === toolkitFilter;
    const matchesPerks = !perksFilter || perks === perksFilter;
    
    const isVisible = matchesSearch && matchesType && matchesToolkit && matchesPerks;
    
    if (isVisible) {
      row.classList.remove('hidden');
      visibleCount++;
    } else {
      row.classList.add('hidden');
    }
  });
  
  updateFilterCountRecipes(visibleCount, rows.length);
}

function updateFilterCountRecipes(visible, total) {
  const table = document.querySelector('.cooking-recipes-table table');
  if (!table) return;
  
  if (visible === undefined) {
    visible = table.querySelectorAll('tbody tr:not(.hidden)').length;
    total = table.querySelectorAll('tbody tr').length;
  }
  
  const countElement = document.getElementById('filterResultCountRecipes');
  if (countElement) {
    countElement.textContent = `Showing ${visible} of ${total} recipes`;
  }
}

function clearCookingRecipesFilters() {
  document.getElementById('cookingRecipesSearch').value = '';
  document.getElementById('typeFilter').value = '';
  document.getElementById('toolkitFilter').value = '';
  document.getElementById('perksFilter').value = '';
  filterCookingRecipesTable();
}

document.addEventListener('DOMContentLoaded', initCookingRecipesFilters);
</script>

<div class="cooking-recipes-table" markdown="1">
